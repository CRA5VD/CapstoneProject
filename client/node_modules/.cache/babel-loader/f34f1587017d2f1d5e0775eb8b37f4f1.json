{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_images_1 = __importStar(require(\"react-images\"));\n\nvar react_photo_collage_component_1 = require(\"./react-photo-collage-component\");\n\nvar createPhotoIds = function (photos) {\n  return photos.map(function (data, i) {\n    return __assign(__assign({}, data), {\n      id: i\n    });\n  });\n};\n\nvar createLayoutPhotoMaps = function (layout, photos) {\n  var newPhotos = createPhotoIds(photos);\n  var newMaps = {};\n  layout.reduce(function (accumulator, currentValue, currentIndex) {\n    newMaps[currentIndex] = newPhotos.slice(accumulator, accumulator + currentValue);\n    return accumulator + currentValue;\n  }, 0);\n  return newMaps;\n};\n\nvar checkProps = function (props) {\n  var defaultProps = {\n    width: '800px',\n    height: new Array(props.layout.length),\n    layout: [],\n    photos: [],\n    showNumOfRemainingPhotos: false\n  };\n\n  var newProps = __assign(__assign({}, defaultProps), props);\n\n  if (newProps.height.length < newProps.layout.length) {\n    for (var i = 0; i < newProps.layout.length; i++) {\n      newProps.height[i] = '200px';\n    }\n  }\n\n  return newProps;\n};\n\nvar ReactPhotoCollageContainer = function (props) {\n  var currProps = react_1.useMemo(function () {\n    return checkProps(props);\n  }, [props]);\n  var width = currProps.width,\n      height = currProps.height,\n      layout = currProps.layout,\n      photos = currProps.photos,\n      showNumOfRemainingPhotos = currProps.showNumOfRemainingPhotos;\n  var layoutNum = layout.reduce(function (accumulator, currentValue) {\n    return accumulator + currentValue;\n  }, 0);\n  var remainingNum = photos.length - layoutNum;\n\n  var _a = react_1.useState(false),\n      allowRender = _a[0],\n      setAllowRender = _a[1];\n\n  var _b = react_1.useState({}),\n      layoutPhotoMaps = _b[0],\n      setLayoutPhotoMaps = _b[1];\n\n  var _c = react_1.useState(false),\n      viewerIsOpen = _c[0],\n      setViewerIsOpen = _c[1];\n\n  var _d = react_1.useState(0),\n      currentImage = _d[0],\n      setCurrentImage = _d[1];\n\n  react_1.useEffect(function () {\n    setLayoutPhotoMaps(createLayoutPhotoMaps(layout, photos));\n  }, []);\n  react_1.useEffect(function () {\n    Object.keys(layoutPhotoMaps).length ? setAllowRender(true) : setAllowRender(false);\n  }, [layoutPhotoMaps]);\n  var openLightbox = react_1.useCallback(function (id) {\n    setCurrentImage(parseInt(id));\n    setViewerIsOpen(true);\n  }, []);\n  var closeLightbox = react_1.useCallback(function () {\n    setCurrentImage(0);\n    setViewerIsOpen(false);\n  }, []);\n\n  if (allowRender) {\n    return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(react_photo_collage_component_1.ReactPhotoCollageComponent, {\n      width: width,\n      height: height,\n      layout: layout,\n      layoutPhotoMaps: layoutPhotoMaps,\n      layoutNum: layoutNum,\n      remainingNum: remainingNum,\n      showNumOfRemainingPhotos: showNumOfRemainingPhotos,\n      openLightbox: openLightbox\n    }), react_1.default.createElement(react_images_1.ModalGateway, null, viewerIsOpen ? react_1.default.createElement(react_images_1.Modal, {\n      onClose: closeLightbox\n    }, react_1.default.createElement(react_images_1.default, {\n      views: photos,\n      currentIndex: currentImage\n    })) : null));\n  }\n\n  return null;\n};\n\nexports.default = ReactPhotoCollageContainer;","map":{"version":3,"sources":["../../src/react-photo-collage/react-photo-collage-container.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar react_images_1 = __importStar(require(\"react-images\"));\r\nvar react_photo_collage_component_1 = require(\"./react-photo-collage-component\");\r\nvar createPhotoIds = function (photos) {\r\n    return photos.map(function (data, i) {\r\n        return __assign(__assign({}, data), { id: i });\r\n    });\r\n};\r\nvar createLayoutPhotoMaps = function (layout, photos) {\r\n    var newPhotos = createPhotoIds(photos);\r\n    var newMaps = {};\r\n    layout.reduce(function (accumulator, currentValue, currentIndex) {\r\n        newMaps[currentIndex] = newPhotos.slice(accumulator, accumulator + currentValue);\r\n        return accumulator + currentValue;\r\n    }, 0);\r\n    return newMaps;\r\n};\r\nvar checkProps = function (props) {\r\n    var defaultProps = {\r\n        width: '800px',\r\n        height: new Array(props.layout.length),\r\n        layout: [],\r\n        photos: [],\r\n        showNumOfRemainingPhotos: false\r\n    };\r\n    var newProps = __assign(__assign({}, defaultProps), props);\r\n    if (newProps.height.length < newProps.layout.length) {\r\n        for (var i = 0; i < newProps.layout.length; i++) {\r\n            newProps.height[i] = '200px';\r\n        }\r\n    }\r\n    return newProps;\r\n};\r\nvar ReactPhotoCollageContainer = function (props) {\r\n    var currProps = react_1.useMemo(function () { return checkProps(props); }, [props]);\r\n    var width = currProps.width, height = currProps.height, layout = currProps.layout, photos = currProps.photos, showNumOfRemainingPhotos = currProps.showNumOfRemainingPhotos;\r\n    var layoutNum = layout.reduce(function (accumulator, currentValue) { return accumulator + currentValue; }, 0);\r\n    var remainingNum = photos.length - layoutNum;\r\n    var _a = react_1.useState(false), allowRender = _a[0], setAllowRender = _a[1];\r\n    var _b = react_1.useState({}), layoutPhotoMaps = _b[0], setLayoutPhotoMaps = _b[1];\r\n    var _c = react_1.useState(false), viewerIsOpen = _c[0], setViewerIsOpen = _c[1];\r\n    var _d = react_1.useState(0), currentImage = _d[0], setCurrentImage = _d[1];\r\n    react_1.useEffect(function () {\r\n        setLayoutPhotoMaps(createLayoutPhotoMaps(layout, photos));\r\n    }, []);\r\n    react_1.useEffect(function () {\r\n        Object.keys(layoutPhotoMaps).length ? setAllowRender(true) : setAllowRender(false);\r\n    }, [layoutPhotoMaps]);\r\n    var openLightbox = react_1.useCallback(function (id) {\r\n        setCurrentImage(parseInt(id));\r\n        setViewerIsOpen(true);\r\n    }, []);\r\n    var closeLightbox = react_1.useCallback(function () {\r\n        setCurrentImage(0);\r\n        setViewerIsOpen(false);\r\n    }, []);\r\n    if (allowRender) {\r\n        return (react_1.default.createElement(react_1.default.Fragment, null,\r\n            react_1.default.createElement(react_photo_collage_component_1.ReactPhotoCollageComponent, { width: width, height: height, layout: layout, layoutPhotoMaps: layoutPhotoMaps, layoutNum: layoutNum, remainingNum: remainingNum, showNumOfRemainingPhotos: showNumOfRemainingPhotos, openLightbox: openLightbox }),\r\n            react_1.default.createElement(react_images_1.ModalGateway, null, viewerIsOpen ?\r\n                (react_1.default.createElement(react_images_1.Modal, { onClose: closeLightbox },\r\n                    react_1.default.createElement(react_images_1.default, { views: photos, currentIndex: currentImage }))) : null)));\r\n    }\r\n    return null;\r\n};\r\nexports.default = ReactPhotoCollageContainer;\r\n//# sourceMappingURL=react-photo-collage-container.js.map"]},"metadata":{},"sourceType":"script"}